import{o as _,c as pe,R as fe,i as V,g as _e,C as he,j as ve,k as Z,aS as Ce,aT as be,r as n,s as v,w as l,b as a,Z as y,al as T,y as s,z as g,v as p,x as f,A as H,t as C,a5 as Ee,a0 as Ve}from"./vendor.e9042f2c.js";import{_ as ge,j as Be,i as Ae,d as ye,e as h}from"./main.c4ed6aa9.js";import{_ as Te}from"./EstimateIndexDropdown.16bd4994.js";import{_ as ke}from"./SendEstimateModal.d0eba7d1.js";const Me={},Ie={width:"97",height:"110",viewBox:"0 0 97 110",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Se=fe('<g clip-path="url(#clip0)"><path fill-rule="evenodd" clip-rule="evenodd" d="M41.25 104.844H55V84.2188H41.25V104.844ZM42.9688 103.125H53.2813V85.9375H42.9688V103.125Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0 110H96.25V103.125H0V110ZM1.71875 108.281H94.5312V104.844H1.71875V108.281Z" fill="#817AE3"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M34.375 8.59375H61.875V6.875H34.375V8.59375Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M48.125 15.4688C42.4291 15.4688 37.8125 20.0853 37.8125 25.7812C37.8125 31.4772 42.4291 36.0938 48.125 36.0938C53.8209 36.0938 58.4375 31.4772 58.4375 25.7812C58.4375 20.0853 53.8209 15.4688 48.125 15.4688ZM48.125 17.1875C52.8636 17.1875 56.7188 21.0427 56.7188 25.7812C56.7188 30.5198 52.8636 34.375 48.125 34.375C43.3864 34.375 39.5312 30.5198 39.5312 25.7812C39.5312 21.0427 43.3864 17.1875 48.125 17.1875Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M12.8906 63.5938C12.418 63.5938 12.0312 63.207 12.0312 62.7344V55.8594C12.0312 55.3867 12.418 55 12.8906 55C13.3633 55 13.75 55.3867 13.75 55.8594V62.7344C13.75 63.207 13.3633 63.5938 12.8906 63.5938Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M21.4844 63.5938C21.0117 63.5938 20.625 63.207 20.625 62.7344V55.8594C20.625 55.3867 21.0117 55 21.4844 55C21.957 55 22.3438 55.3867 22.3438 55.8594V62.7344C22.3438 63.207 21.957 63.5938 21.4844 63.5938Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M30.0781 63.5938C29.6055 63.5938 29.2188 63.207 29.2188 62.7344V55.8594C29.2188 55.3867 29.6055 55 30.0781 55C30.5508 55 30.9375 55.3867 30.9375 55.8594V62.7344C30.9375 63.207 30.5508 63.5938 30.0781 63.5938Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M38.6719 63.5938C38.1992 63.5938 37.8125 63.207 37.8125 62.7344V55.8594C37.8125 55.3867 38.1992 55 38.6719 55C39.1445 55 39.5312 55.3867 39.5312 55.8594V62.7344C39.5312 63.207 39.1445 63.5938 38.6719 63.5938Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M47.2656 63.5938C46.793 63.5938 46.4062 63.207 46.4062 62.7344V55.8594C46.4062 55.3867 46.793 55 47.2656 55C47.7383 55 48.125 55.3867 48.125 55.8594V62.7344C48.125 63.207 47.7383 63.5938 47.2656 63.5938Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M55.8594 63.5938C55.3867 63.5938 55 63.207 55 62.7344V55.8594C55 55.3867 55.3867 55 55.8594 55C56.332 55 56.7187 55.3867 56.7187 55.8594V62.7344C56.7187 63.207 56.332 63.5938 55.8594 63.5938Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M64.4531 63.5938C63.9805 63.5938 63.5938 63.207 63.5938 62.7344V55.8594C63.5938 55.3867 63.9805 55 64.4531 55C64.9258 55 65.3125 55.3867 65.3125 55.8594V62.7344C65.3125 63.207 64.9258 63.5938 64.4531 63.5938Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M73.0469 63.5938C72.5742 63.5938 72.1875 63.207 72.1875 62.7344V55.8594C72.1875 55.3867 72.5742 55 73.0469 55C73.5195 55 73.9062 55.3867 73.9062 55.8594V62.7344C73.9062 63.207 73.5195 63.5938 73.0469 63.5938Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M81.6406 63.5938C81.168 63.5938 80.7812 63.207 80.7812 62.7344V55.8594C80.7812 55.3867 81.168 55 81.6406 55C82.1133 55 82.5 55.3867 82.5 55.8594V62.7344C82.5 63.207 82.1133 63.5938 81.6406 63.5938Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M3.4375 103.125H5.15625V56.7188H3.4375V103.125Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M91.0938 103.125H92.8125V56.7188H91.0938V103.125Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M34.375 0C17.2098 0.9075 3.4375 15.2745 3.4375 32.6562V51.5625H34.375V0ZM32.6562 1.86484V49.8438H5.15625V32.6562C5.15625 16.7853 17.0947 3.59391 32.6562 1.86484Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M61.875 0V51.5625H92.8125V32.6562C92.8125 15.2745 79.0402 0.9075 61.875 0ZM63.5938 1.86484C79.1553 3.59391 91.0938 16.7853 91.0938 32.6562V49.8438H63.5938V1.86484Z" fill="#55547A"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M9.45312 34.375C8.97875 34.375 8.59375 33.99 8.59375 33.5157C8.59375 22.9316 13.6262 14.1247 22.7648 8.71238C23.1756 8.47347 23.7033 8.60925 23.9422 9.01488C24.1845 9.42222 24.0487 9.9516 23.6414 10.1939C14.9222 15.3553 10.3125 23.4197 10.3125 33.5157C10.3125 33.99 9.9275 34.375 9.45312 34.375Z" fill="#817AE3"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M54.1406 25.7812C53.6663 25.7812 53.2813 25.3962 53.2813 24.9219C53.2813 22.8748 51.0314 20.625 48.9844 20.625C48.51 20.625 48.125 20.24 48.125 19.7656C48.125 19.2913 48.51 18.9062 48.9844 18.9062C51.963 18.9062 55 21.9433 55 24.9219C55 25.3962 54.615 25.7812 54.1406 25.7812Z" fill="#817AE3"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M0 56.7188H96.25V49.8438H0V56.7188ZM1.71875 55H94.5312V51.5625H1.71875V55Z" fill="#817AE3"></path></g><defs><clipPath id="clip0"><rect width="96.25" height="110" fill="white"></rect></clipPath></defs>',2),$e=[Se];function we(U,d){return _(),pe("svg",Ie,$e)}var De=ge(Me,[["render",we]]);const Ze=C("div",{class:"hidden w-8 h-0 mx-4 border border-gray-400 border-solid xl:block",style:{"margin-top":"1.5rem"}},null,-1),He={class:"relative table-container"},Fe={class:"relative flex items-center justify-between h-10 mt-5 list-none border-b-2 border-gray-200 border-solid"},Pe={class:"flex text-sm font-medium cursor-pointer select-none text-primary-400"},Re={class:"absolute items-center left-6 top-2.5 select-none"},xe={class:"relative block"},Ge={setup(U){const d=Be(),j=Ae(),B=ye(),A=V(null),{t:r}=_e(),b=V(!1),W=V(["DRAFT","SENT","VIEWED","EXPIRED","ACCEPTED","REJECTED"]),k=V(!0),c=V("general.draft");he();let o=ve({customer_id:"",status:"DRAFT",from_date:"",to_date:"",estimate_number:""});const F=Z(()=>!d.totalEstimateCount&&!k.value),M=Z({get:()=>d.selectedEstimates,set:t=>{d.selectEstimate(t)}}),G=Z(()=>[{key:"checkbox",thClass:"extra w-10 pr-0",sortable:!1,tdClass:"font-medium text-gray-900 pr-0"},{key:"estimate_date",label:r("estimates.date"),thClass:"extra",tdClass:"font-medium text-gray-500"},{key:"estimate_number",label:r("estimates.number",2)},{key:"name",label:r("estimates.customer")},{key:"status",label:r("estimates.status")},{key:"total",label:r("estimates.total"),tdClass:"font-medium text-gray-900"},{key:"actions",tdClass:"text-right text-sm font-medium pl-0",thClass:"text-right pl-0",sortable:!1}]);Ce(o,()=>{J()},{debounce:500}),be(()=>{d.selectAllField&&d.selectAllEstimates()});function O(){return B.hasAbilities([h.CREATE_ESTIMATE,h.EDIT_ESTIMATE,h.VIEW_ESTIMATE,h.SEND_ESTIMATE])}async function z(t,i){o.status="",I()}function I(){A.value&&A.value.refresh()}async function L({page:t,filter:i,sort:m}){let S={customer_id:o.customer_id,status:o.status,from_date:o.from_date,to_date:o.to_date,estimate_number:o.estimate_number,orderByField:m.fieldName||"created_at",orderBy:m.order||"desc",page:t};k.value=!0;let u=await d.fetchEstimates(S);return k.value=!1,{data:u.data.data,pagination:{totalPages:u.data.meta.last_page,currentPage:t,totalCount:u.data.meta.total,limit:10}}}function X(t){if(c.value==t.title)return!0;switch(c.value=t.title,t.title){case r("general.draft"):o.status="DRAFT";break;case r("general.sent"):o.status="SENT";break;default:o.status="";break}}function J(){d.$patch(t=>{t.selectedEstimates=[],t.selectAllField=!1}),I()}function P(){o.customer_id="",o.status="",o.from_date="",o.to_date="",o.estimate_number="",c.value=r("general.all")}function q(){b.value&&P(),b.value=!b.value}async function K(){j.openDialog({title:r("general.are_you_sure"),message:r("estimates.confirm_delete"),yesLabel:r("general.ok"),noLabel:r("general.cancel"),variant:"danger",hideNoButton:!1,size:"lg"}).then(t=>{t&&d.deleteMultipleEstimates().then(i=>{I(),i.data&&d.$patch(m=>{m.selectedEstimates=[],m.selectAllField=!1})})})}function Q(t){switch(t){case"DRAFT":c.value=r("general.draft");break;case"SENT":c.value=r("general.sent");break;case"VIEWED":c.value=r("estimates.viewed");break;case"EXPIRED":c.value=r("estimates.expired");break;case"ACCEPTED":c.value=r("estimates.accepted");break;case"REJECTED":c.value=r("estimates.rejected");break;default:c.value=r("general.all");break}}return(t,i)=>{const m=n("BaseBreadcrumbItem"),S=n("BaseBreadcrumb"),u=n("BaseIcon"),$=n("BaseButton"),R=n("router-link"),Y=n("BasePageHeader"),ee=n("BaseCustomerSelectInput"),E=n("BaseInputGroup"),te=n("BaseMultiselect"),x=n("BaseDatePicker"),ae=n("BaseInput"),le=n("BaseFilterWrapper"),se=n("BaseEmptyPlaceholder"),w=n("BaseTab"),oe=n("BaseTabGroup"),ne=n("BaseDropdownItem"),ie=n("BaseDropdown"),N=n("BaseCheckbox"),re=n("BaseText"),de=n("BaseEstimateStatusBadge"),ue=n("BaseFormatMoney"),ce=n("BaseTable"),me=n("BasePage");return _(),v(me,null,{default:l(()=>[a(ke),a(Y,{title:t.$t("estimates.title")},{actions:l(()=>[y(a($,{variant:"primary-outline",onClick:q},{right:l(e=>[b.value?(_(),v(u,{key:1,name:"XIcon",class:g(e.class)},null,8,["class"])):(_(),v(u,{key:0,class:g(e.class),name:"FilterIcon"},null,8,["class"]))]),default:l(()=>[p(f(t.$t("general.filter"))+" ",1)]),_:1},512),[[T,s(d).totalEstimateCount]]),s(B).hasAbilities(s(h).CREATE_ESTIMATE)?(_(),v(R,{key:0,to:"estimates/create"},{default:l(()=>[a($,{variant:"primary",class:"ml-4"},{left:l(e=>[a(u,{name:"PlusIcon",class:g(e.class)},null,8,["class"])]),default:l(()=>[p(" "+f(t.$t("estimates.new_estimate")),1)]),_:1})]),_:1})):H("",!0)]),default:l(()=>[a(S,null,{default:l(()=>[a(m,{title:t.$t("general.home"),to:"dashboard"},null,8,["title"]),a(m,{title:t.$tc("estimates.estimate",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),y(a(le,{"row-on-xl":!0,onClear:P},{default:l(()=>[a(E,{label:t.$tc("customers.customer",1)},{default:l(()=>[a(ee,{modelValue:s(o).customer_id,"onUpdate:modelValue":i[0]||(i[0]=e=>s(o).customer_id=e),placeholder:t.$t("customers.type_or_click"),"value-prop":"id",label:"name"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),a(E,{label:t.$t("estimates.status")},{default:l(()=>[a(te,{modelValue:s(o).status,"onUpdate:modelValue":[i[1]||(i[1]=e=>s(o).status=e),Q],options:W.value,searchable:"",placeholder:t.$t("general.select_a_status"),onRemove:i[2]||(i[2]=e=>z())},null,8,["modelValue","options","placeholder"])]),_:1},8,["label"]),a(E,{label:t.$t("general.from")},{default:l(()=>[a(x,{modelValue:s(o).from_date,"onUpdate:modelValue":i[3]||(i[3]=e=>s(o).from_date=e),"calendar-button":!0,"calendar-button-icon":"calendar"},null,8,["modelValue"])]),_:1},8,["label"]),Ze,a(E,{label:t.$t("general.to")},{default:l(()=>[a(x,{modelValue:s(o).to_date,"onUpdate:modelValue":i[4]||(i[4]=e=>s(o).to_date=e),"calendar-button":!0,"calendar-button-icon":"calendar"},null,8,["modelValue"])]),_:1},8,["label"]),a(E,{label:t.$t("estimates.estimate_number")},{default:l(()=>[a(ae,{modelValue:s(o).estimate_number,"onUpdate:modelValue":i[5]||(i[5]=e=>s(o).estimate_number=e)},{left:l(e=>[a(u,{name:"HashtagIcon",class:g(e.class)},null,8,["class"])]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},512),[[T,b.value]]),y(a(se,{title:t.$t("estimates.no_estimates"),description:t.$t("estimates.list_of_estimates")},{actions:l(()=>[s(B).hasAbilities(s(h).CREATE_ESTIMATE)?(_(),v($,{key:0,variant:"primary-outline",onClick:i[6]||(i[6]=e=>t.$router.push("/admin/estimates/create"))},{left:l(e=>[a(u,{name:"PlusIcon",class:g(e.class)},null,8,["class"])]),default:l(()=>[p(" "+f(t.$t("estimates.add_new_estimate")),1)]),_:1})):H("",!0)]),default:l(()=>[a(De,{class:"mt-5 mb-4"})]),_:1},8,["title","description"]),[[T,s(F)]]),y(C("div",He,[C("div",Fe,[a(oe,{class:"-mb-5",onChange:X},{default:l(()=>[a(w,{title:t.$t("general.draft"),filter:"DRAFT"},null,8,["title"]),a(w,{title:t.$t("general.sent"),filter:"SENT"},null,8,["title"]),a(w,{title:t.$t("general.all"),filter:""},null,8,["title"])]),_:1}),s(d).selectedEstimates.length&&s(B).hasAbilities(s(h).DELETE_ESTIMATE)?(_(),v(ie,{key:0,class:"absolute float-right"},{activator:l(()=>[C("span",Pe,[p(f(t.$t("general.actions"))+" ",1),a(u,{name:"ChevronDownIcon"})])]),default:l(()=>[a(ne,{onClick:K},{default:l(()=>[a(u,{name:"TrashIcon",class:"mr-3 text-gray-600"}),p(" "+f(t.$t("general.delete")),1)]),_:1})]),_:1})):H("",!0)]),a(ce,{ref:(e,D)=>{D.tableComponent=e,A.value=e},data:L,columns:s(G),"placeholder-count":s(d).totalEstimateCount>=20?10:5,class:"mt-10"},Ee({header:l(()=>[C("div",Re,[a(N,{modelValue:s(d).selectAllField,"onUpdate:modelValue":i[7]||(i[7]=e=>s(d).selectAllField=e),variant:"primary",onChange:s(d).selectAllEstimates},null,8,["modelValue","onChange"])])]),"cell-checkbox":l(({row:e})=>[C("div",xe,[a(N,{id:e.id,modelValue:s(M),"onUpdate:modelValue":i[8]||(i[8]=D=>Ve(M)?M.value=D:null),value:e.data.id},null,8,["id","modelValue","value"])])]),"cell-estimate_date":l(({row:e})=>[p(f(e.data.formatted_estimate_date),1)]),"cell-estimate_number":l(({row:e})=>[a(R,{to:{path:`estimates/${e.data.id}/view`},class:"font-medium text-primary-500"},{default:l(()=>[p(f(e.data.estimate_number),1)]),_:2},1032,["to"])]),"cell-name":l(({row:e})=>[a(re,{text:e.data.customer.name,length:30},null,8,["text"])]),"cell-status":l(({row:e})=>[a(de,{status:e.data.status,class:"px-3 py-1"},{default:l(()=>[p(f(e.data.status),1)]),_:2},1032,["status"])]),"cell-total":l(({row:e})=>[a(ue,{amount:e.data.total,currency:e.data.customer.currency},null,8,["amount","currency"])]),_:2},[O()?{name:"cell-actions",fn:l(({row:e})=>[a(Te,{row:e.data,table:A.value},null,8,["row","table"])])}:void 0]),1032,["columns","placeholder-count"])],512),[[T,!s(F)]])]),_:1})}}};export{Ge as default};
